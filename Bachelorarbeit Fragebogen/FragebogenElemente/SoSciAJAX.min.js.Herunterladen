!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.SoSciAJAX=t():e.SoSciAJAX=t()}(self,(function(){return function(){"use strict";var e={d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};function n(e,t,r,a,s){if(s||(s=!1),!this)return new n(e,t,r,a,s);var o,i,l,c=this,d="init",u=new XMLHttpRequest,h=[];function f(){if(4===u.readyState){if(200!==u.status)return 0===u.status?alert("Warning: The server did not respond or the browser blocked the request. Please retry the action or change.\nURL: "+e):alert("Warning: Received status code "+u.status+" for request to server.\nURL: "+e),void c.handleResponse("err",null);if(!u.responseXML)return alert("Warning: Received non-XML response.\n\n"+u.responseText.substr(0,128)+"\n\n"+(t=u.responseText,n=(((n||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join(""),t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*|!DOCTYPE)\b[^>]*>/gi,(function(e,t){return n.indexOf("<"+t.toLowerCase()+">")>-1?e:""}))).replace(/[\r\n]+/g,"\n").substr(0,128)),void c.handleResponse("err",null);var t,n,r=u.responseXML.getElementsByTagName("reply");if(1!==r.length)return alert("Warning: Received invalid XML response (root="+r.length+")"),void c.handleResponse("err",null);var a=r[0].getElementsByTagName("status");if(1!==a.length)return alert("Warning: Received invalid XML response (status="+a.length+")"),void c.handleResponse("err",null);for(var s=a[0].firstChild.nodeValue,o=r[0].getElementsByTagName("error"),i=0;i<o.length;i++)o[i].firstChild?alert(o[i].firstChild.nodeValue):(alert("Unspecific error"),console.log("No error message received in AJAX response."));if("json"===s){var l=null;1===(f=r[0].getElementsByTagName("json")).length&&(l=JSON.parse(f[0].firstChild.nodeValue));var d={status:"ok"},h=r[0].getElementsByTagName("info");h.length>0&&(d.status="info",d.message=h[0].firstChild.nodeValue),(h=r[0].getElementsByTagName("warning")).length>0&&(d.status="warning",d.message=h[0].firstChild.nodeValue),(h=r[0].getElementsByTagName("error")).length>0&&(d.status="error",d.message=h[0].firstChild.nodeValue),c.handleResponse(d,l)}else{var f=r[0].getElementsByTagName("data");for(l={},i=0;i<f.length;i++){var g=f[i].getAttribute("key");g&&(null===f[i].firstChild?l[g]="":l[g]=f[i].firstChild.nodeValue)}c.handleResponse(s,l)}}}function g(){d="sent",u.open("POST",e,!0);var n=[];for(var r in t)n.push(encodeURIComponent(r)+"="+encodeURIComponent(t[r]));var a=n.join("&");u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(a),u.onreadystatechange=f}this.getTime=function(){return l},this.handleResponse=function(e,t){d="err"===e?"fail":"complete",r&&r(e,t,a),i=e,o=t;for(var n=0;n<h.length;n++)h[n].handleResponse(e,t)},this.backpack=function(e){"sent"===d||"init"===d?h.push(e):e.handleResponse(i,o)},function(){if(s)g();else{var r="H"+function(e,t){var n,r,a,s,o,i,l,c;for(n=3&e.length,r=e.length-n,a=void 0,o=3432918353,i=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,a=27492+(65535&(s=5*(65535&(a=(a^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*i+(((l>>>16)*i&65535)<<16)&4294967295)<<13|a>>>19))+((5*(a>>>16)&65535)<<16)&4294967295))+((58964+(s>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:a^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*i+(((l>>>16)*i&65535)<<16)&4294967295}return a^=e.length,a=2246822507*(65535&(a^=a>>>16))+((2246822507*(a>>>16)&65535)<<16)&4294967295,a=3266489909*(65535&(a^=a>>>13))+((3266489909*(a>>>16)&65535)<<16)&4294967295,(a^=a>>>16)>>>0}(JSON.stringify({url:e,data:t})),a=new Date,o=(l=a.getTime())-5e3;r in n.cache&&n.cache[r].getTime()>o?n.cache[r].backpack(c):(n.cache[r]=c,g())}}()}e.d(t,{default:function(){return r}}),n.cache={};var r=n;return t.default}()}));