!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.S2QstText=e():t.S2QstText=e()}(self,(function(){return function(){"use strict";var t={d:function(e,n){for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};function n(t){var e=!1;function n(){e||(e=!0,t())}"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?n():window.addEventListener("DOMContentLoaded",n)}function s(t){var e=document.getElementById(t+"_qst");SoSciTools.QuestionWithItems.call(this,t,"text",e),this.responseComplete=function(){var t=this.items;for(var e in t)if(t[e].input&&""===t[e].input.value.trim())return!1;return!0}}t.d(e,{default:function(){return i}}),n.onload=function(t){new n(t)},s.TextSum=function(){var t={},e=[],n=".";function s(t,e,s,i,a){var o=[],r=document.getElementById(t);function u(){for(var t=0,e=0;e<o.length;e++){var n,s=o[e].value;i>0?(s=s.replace(/,/,"."),n=parseFloat(s)):n=parseInt(s),isNaN(n)||(t+=n)}if(i>0){var a=Math.pow(10,i);t=Math.round(t*a)/a}else t=Math.round(t);return t}r?(r.classList||(r.classList=SoSciTools.classList(r)),r.classList.add("s2iInputOut")):console.warn("There is no element for the S2QstText.TextSum with ID",t),this.updateSum=function(){if(r){var t,s=u();i>0?(t=s.toFixed(i),"."!==n&&(t=t.replace(".",n))):t=s.toString(),r.value=t,0===s?(r.classList.remove("s2iFine"),r.classList.remove("s2iFail")):s==e?(r.classList.add("s2iFine"),r.classList.remove("s2iFail")):(r.classList.add("s2iFail"),r.classList.remove("s2iFine"))}};for(var c=0;c<s.length;c++){var d=document.getElementById(s[c]);d?(d.addEventListener?(d.addEventListener("keyup",this.updateSum,!1),d.addEventListener("change",this.updateSum,!1)):d.attachEvent&&d.attachEvent("onkeyup",this.updateSum),o.push(d)):console.warn("There is no input "+s[c])}this.updateSum(),this.checkExpectation=function(){return e==u()},this.getExpectation=function(){return e},this.getErrorMessage=function(){return a}}function i(n){for(var s=0;s<e.length;s++){var i=t[e[s]];if(!i.checkExpectation())return alert(i.getErrorMessage()),!1}return!0}this.attach=function(e,n,i,a,o){t[e]=new s(e,n,i,a,o)},this.check=function(t){e.push(t),SoSciTools.getPage().attachCheck(i)},this.setDecimalSeparator=function(e){for(var s in n=e,t)t[s].updateSum()}},s.textSumInstance=new s.TextSum,window.oFbTextSumInstance=s.textSumInstance,s.Item=function(t,e){var n=parseInt(t.substr(5).replace(/^0/,"")),s=[e],i=document.getElementById(t+"_input"),a=document.getElementById(t+"a");a&&s.push(a),SoSciTools.QuestionItem.call(this,n,s,i)},s.instances={},s.getInstance=function(t){return t in s.instances||(s.instances[t]=new s(t)),s.instances[t]},s.init=function(){for(var t=document.getElementsByClassName("s2jsText"),e=0;e<t.length;e++){var n=t[e],i=n.getAttribute("id"),a=i.substr(0,4);if("_sum"!==i.substr(4)){var o=s.getInstance(a),r=new s.Item(i,n);o.registerItem(r)}}},n.onload(s.init);var i=s;return e.default}()}));